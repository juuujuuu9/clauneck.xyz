---
import Layout from '../layouts/Layout.astro';
---

<Layout>
	<div class="flex items-center justify-center h-auto min-h-screen bg-black text-white px-[5%] xl:pr-[15%] xl:pl-0">
		<div class="w-full flex flex-col  xl:flex-row items-center justify-center max-w-none mt-10 xl:mt-0 xl:gap-14 gap-0">
			<div class="relative w-full flex items-center justify-center">
				<h1 id="ascii-art" class="text-green-500 font-mono whitespace-pre xl:text-[3.5px] sm:text-[3px] text-[2px] leading-none transition-opacity duration-500">
			............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
................................................................................................................................................$$$$$$$$$$$$$$$.............................................................................................................................................
.....................................................................................................................................$$$......$$$$$$$$$$$$$$$$$$$$.................................$$$$$$...................................................................................................
...................................................................................................................................$$$$$$$$$$$$             $.  $$$$.............................$$$$   $$..................................................................................................
.................................................................................................................................$$$  $$                      $.   $$$$.........................$$    $$ $$.................................................................................................
..............................................................................................................................$$$$   $$$     $                  $.    $$$.......................$$$  $..$ $.................................................................................................
............................................................................................................................$$$     $$$   $$$$$$$$$$$$$           .$    $$$$....................$$$  $ $$$$........$$$$.....................................................................................
...........................................................................................................................$$       $  $$$$.$....$$$$$$  $$$       $.$     $$$...................$$ $..$ $...$..$$$$  $$$...................................................................................
..........................................................................................................................$$         $$.$$$$$$$$$$$$$$$$ $.$$  $$    $$      $$$$$$..............$$$ $ . $$$$$$$..$.$.$ $...................................................................................
.........................................................................................................................$$       $...               $$$$$$.$$$$$$     $   .      $$$$............$$$.$...$$$.. $$$ .   $...................................................................................
.........................................................................................................................$       $$   $$   $$$$            $$$$$.$$$$        $  .    $$$.........$$ .$  $$ . $$ $$$ $$$$$...................................................................................
........................................................................................................................$$       $.$.$$  $$  $$ ..             $$$$$.$$$     $.  .     $$$.......$ $  $$$ $$ $$  .$ $$.$$$..................................................................................
.....................$$................................................................................................$$       $.$ $  $.$  $$$$.                   $$$$$$$ $     .$     $$$.....$$$$  $$$  $$$ . . $$$$.$..................................................................................
.....................$.$..............................................................................................$$       $$$    $$$    .                     .    $$$.$$ $   .       $$$......$$$ $... $$$$$.  $..$.$$$$..............................................................................
.....................$$.$$............................................................................................$        $$   $$.$    $$                       .      $$.$$  $.        $$$.....$$   $ . $$$ $$ $.$$$$$$$$........$$$$$................................................................
..................$$$..$ $$....$$$...................................................................................$$         $  $$$$     .                         .         $.  .$      .  $$$..$$       .  $  $$$$$$$$ .$$$$$$$$$.$$ $.$...............................................................
..................$ $$.$$.$$$$.$.$$$................................................................................$$        $$  $$.$$    $                   ..           $$$     $.  .      $ $$$$ $        $$.$$$ $$.$$.$ $$$..$ $$$$$.$$$$.............................................................
..................$$.$$$.$$$ $..$$.$$......$$$......................................................................$        $$   $..$                       .   .. .        $$$$    .        $.   $.$ $      $$   $$ $$$       $$$  $$ $$$ $ $.............................................................
.....................$ $$$.$$....$$..$$$..$$$$......$$$$............................................................$  .    . $  $$.$$   .             .$.$                    $              $ $$$ $$$$       $ . $$$ $     .$$$$.$$ .$.$$$$$$.............................................................
..................$$$.$$ $...$.$...$$$$$$$$ $$......$$ $...........................................................$$ ..   $$    $.$$             .  ..                                      $$ .$$$$ $$       .   $.$$   ..   $$ $$$. $$  $................................................................
..................$$$$.$$$...$$$....$$$.$$..$.......$$$$$..........................................................$  .    .     $.$$                                $$       . $$    .     $$  . $.$  $$      $$ $$.$.$$$   .. $$   .$   $$................................................................
..................$$$.$$$....$ $$.......$$$ $.........$ $$$........................................................$  $   $$    $$.$                          . $$$$$$$$$$      $..$ . .   $$$  . $.$$ $.$    $$$.$$$ $..$       .$$$.$$$$$.................................................................
.....................$$ $....$$$$.........$$........$$.$$$$$.......................................................$     $.$     $.$    ..                     $$....$$.$$.$$     .   ..  $.$ $$  $.$  $.$$         ..$..$$  $$   $. $$$$$$$................................................................
......................$$............................$ $..$ $.......................................................$$    $$$     $.$         .    . .         $$$$$$$$$$$$$$$$    $$  .   $$   .$ $$$ $$$   $.......$$$$$$   $  $$$$$.$$ $ $$$$.............................................................
...................................$......$$..$$$...$$..$.$$$$$....................................................$    $$$$     $.$                   .   . . $                   .$    $$    .  $$  $$  $.$   $     $$       $$.$$ $$.$$$  $$$............................................................
.................................$....$$$.$.$.$ $..$$..$$$$$.$$$...................................................$   $$.$      $$              .      ...                   $     $    $$    $ $.$ $$$  $      .  $$.$     $$.$$  .$$ $.     $............................................................
..................................$...$ $..$..$$...$ $$$$. $.$$$...........$......................................$$   $$.$      $$              .. .  .            .$      $$$     $$   $    $$ $. $$$$$$         $$$$$..$ $$$$$  $      .. $$$............................................................
......................................$$........$..$$.$$$$$$$.....$$$$$.....$.....................................$     $$$      $$              .. .                ... .$$$.$$      .  $    .    ..  $ $.$$ .$$$   $.$      $$$$$$          $.....$$$$$$$$$...............................................
.................................$$$.............$....$$.$.$$.....$....$..$.$.....................................$               .        .                     $$.$     $$..$$          $   .   .$$    $$    $$..$ $.$$$  $ $$$$$  $.$$    $$..$$$.$$.. $$$$$.............................................
..........................$$$..$$$$$..................$$$.$$....$$.$.$.$$..$.$...................................$$               .                                     $$$...$           $$ $$  $$        $$$  $   $$..$   . $$$.$  $    $$$$.$$$...$.$$$$$.$$.............................................
..........................$ $..$.$ $.................$$..$$..$$$ $...$.....$$..$..................................$$              $                    $$$$           $$$.....$$        .       $.$      $$$$$$  $$$ $.$$  $. $..$$$       $$.$$ ...$ . $$ $  $.............................................
..........................$$$...$$$$......$$$$$$$$$$$ $.$$.$$$  $$...$..........$..................................$        $$                         $..$$ $$      $$$......$$                $$       $$$$$$      $$$  $$ $$..$$         $$$$..$ $$$ $$   $$.............................................
.......................................$$$...$ $.  .$ $.$..$$ $$$$..$$........$.$$$................................$$$        .              $.$       $$..$$$$$$$$$$$.......$$         .        $$$      $         .$$$  $$$$...$  $  $.$.$$    $$$ $$    $$$..............................................
...................................$...$ $$.$$$$$$$$$$$$$..$ $$$..$$$..$$$.$$$$ . $..................................$$     .  ..                       $$$$$$$$..........$$$$$        .         $.$$$      ..   $$$     $$$$$$$$$  $$ $      $$ $$$     $$$................................................
....................................$..$$$$ $........$$$$$$$.$.$$$$....$..$$$.$$$$$$$$................................$$$                               $$$$  $$$$$$.....$$            .          $$.$$   $.   $$$$$.$ .      $         $$$$$$$    .   $$$.............................$....................
..............................$$$$........$$$...$$$$$$$$$$.$$$$ $..$$$$..$$$$$$$...$$$$$$$$.............................$$                         $.   $.$ ..$    $$$$..$$              $$$       $$$$..$   . $     $    .  $$...$   $$$.....$$$$   $$$.............................$$.....................
................................$ $..$$.....$$$$$$$$$$  .$$$$$$$$$$..$..$$$.$$....$$$$$$  $..$$$.........................$$$$   .                .  .    $$   $$...$$$$$$$$              $$$.$        $    ..  .                  $$$$$$........$$$$$$.......................$$$$$$$$..$....................
..............................$$$$$.$$$$.$$$$$$$.$$$$$$$$$$$$$$$..$..$.$$.$.$$$..$$...$$$$.$$$ $.$$$$......$$$$$$...........$$$$                    $.    $  $$$       $$ $$             $               ..         .. .  $$$$$$$$$.....................................$$$..........$$.....................
....................................$$$$..$.$..$$$$$$$$$$....$$$$$$$$$$$$.$$$$..$$$$$$$..$$ $$$$.$ $$...$$..$$.$..............$$$$                .         $$$ .     $  .               .$$$$.$$      .            ..   $$$$........................................$$$$ $..$$$$$$$........................
...............................$$$$$.$$...$$$...$$...$$$$$$$$$$$. $    . .$$$.$$$$ $$$$.$$$$ $$..$$ $$$.$$$$$.$$$..$$$$$$..$$$$$$.$$$ .                           .. $$$$$                $$.$. $$$                $$      $$$...............$.............$$$$$$$$$.$ $$$$...$$$$..........................
................................ . $......$.$$  $$$$$$$$ $$.   $$$$$$$$$$$$..$$$  $$$.$$$$  $$$$$$   $$.$$$ $ $$..$..$ $$$$$$...$$$$.$$$$$$                    $.$ $$$.$$$              . $$  $.  .$    ..$$$ ..  $$$$$     $$$.............$..$$$$$$$$$$$$$     $$$$$$.$$....$ ............................
...............................$$$$$..$$$$..$$$$$$.$..  . $$$$$$$.....$$....$$$  $$.$$$   $$$$.$$$$  $$.$$$.$.$$$....$$$$$$...$$  $$..$.$$$$$$...$$              . $$.$$                . $$    $.        $$   .  $$$$       $$..$$$$$$$$$$$.$.$.  . ..$ $ $ $$$$$$.$$$$$$$...$$$$..........................
..........................$....$$$....$$  $$$$$.$$$ ..$ ..$.$ $$$$$$.$$$$$$$$   $$.$$$$  $$..$$$  $$$$$$$$     .$$..$.$  $$$$$  $$.$..$   $$$$$             .    $$.$$$       .           .       .                           $$$$$$...$  . $.$.$$$$...$. $$.$$$.$$$$$ .  $.................................
.........................$.$...$ $.....$$$  $$$$$.$$$ .$ $$$ $$    $$$$   ...$$$.$$$$  $$$.$$$$ $$$$.$$$  $$$$$$$.$$$.$$$.  $$$$$$$$$$   $ $$                   $$$$$                    $$ $$ $$                 $$$       $$$  $$...$$$$$$$$ $...$$.$ $$$..$.$$$...$$$$$$.............$$$$................
..........................$....$.$.......$$$$ $.$$.$$ $$ $$.$$$ $   $$.$$$$$$$$$$$   $$$.$$$$   $$$.$$   $$.$$$$$$$$  .$$$$$$$$.$$$....$                         $                   $ $  $ ..$$$ $$$               .$          ..$$$$$$$$...$$$....$$$$.$$..$$.$........................ $$................
...............................$ $.$$.......$$.$ $..$.$$$$ .$$$ $.$$$ . $$$$$$ ..$$$$.$$$$ .$$$$.$$$$  $$$.$$$  $..$$$$$$..$$$$$$$  $                                               $..$   $$.$$ $$ $.$ $$          $$$ .     $  $$ $$...$............$$$  $$ $$$$$.$$$$................$$$$................
...............................$$$..$........$ .$.$..$ . $$$$$...$..$$  $ $$.$$$$$.$$$$  $$$$$.$$$$  $$$$.$$$.  $..$$$...$$$$$$$....       .            .                  .      $$$$.$$ $$$ $ $..   $.. .$$       $$        $$$$$$$$$..$$$$$$$$.....$$$$$$$$$ ..$.........................................
...................................$$...$$$$.$$$$$ $$$..$.$$.$$$.$. .$ .  ..$$$$..$$$$.$$$$.$$$$$.$$$$..$$$  ...$$$$$$$...$$......                                               $ $$$$ $  $.$ ..  $$  $.$$.$         $...$     $........... .........$$$$$.$$$$$$.................$.......$..$$............
....................................$$$$$$$$$....$$$$. $. $$$$$ $...$...    $..$$$$$$ $$$..$$$$$.$$$$.$$$$.$$$$$$ . $$$...$$.                                                   $$$$..$$$   $$ . $...$  $$$$$                   $......$$$$.$$$...$$$..........$$$$$$$$$$$.$$$....$........$$...............
...................................$$$$$   $$$$$..$....$.$..$$  $.$ $... $$$$$$$$ $.$ $$$..$$$.$$$$.$$$$$.$$$$.$$..$$$$.$$$                                      .            $ $$$....$$    . $   .. $$ $$.$         $$$$     $....$$$$$$$$$$$$$$$$$$$$$$$$$$$$.$$.$..$.$$$.$.....$..........$$............
................................$$$$$$$$.$.$$$ $$$$.    $$....$  $$ ..  .$$$     $ $$$...$$$. $$$$..$$$  $$$..$$ $$$$$.$$                    .                       .$$$   $ $$$.......$$   .   $..       $.$       . $$    $$$$$$$$$$$$$$  .....$$$$.$$$..$$$$$$$$$$$$$$.$$$..............$$$.............
...............................$$$$$$$$$ . .. . $ $$$.$$  .$$$.$  $$ $.$  .$   $$$   $ $$$$ $$$$$.$$$$ $$$$.$$$$$  $.$                                                $$.$  .$.$$.......$$   . ..  .$ ..     $$               $.....$      $$$$$$$$$$$$$$$$$$$$$$$$$.......................$$.$.............
...............................$$  $$$$$ $$       $$$  $$$$$$ $$$ $.$ $$ $.$  $$.$$$$$$   $$.$.$$$$$  $$$..$$$ $$$$.$                                       .           $$ $. $ $$......$  $ . . ... $ ..    $$          $     $.$$$$$$$$$$$..$..$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$...........$$$.............
.............................$$$$$$$$$ $..$         $$$....$... .  $$ $$  . $  $..$$$$$ $$ $ $$$$  $$$$.$$$$$  $$$$             $$                             $$       .$. $$.$$$......$  . $$ $  .$ .. $               $$      $$$$$$$$$$$$$$$$$$$$ $....$$. .  $.  .  . . .$ $............$$$$...........
.............................$    $$$ . $$$$         $$....$ .$..$$.$ $$$$ $.$$$...  $$$$  .. $  $$$$.$$$$ .$$$$.$$        .$      .$      $.   ..    . $$ $ $$$$       $  $.$$.$$.....$$  $ $$ $...   $$ .                 .        $$        $ $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$............$  $...........
.............................$$$$$ $$ $       ..$$$    $...$$$$ .$$$$$$    $$ $$$..$    $ .. $ $$$.$$$$  $$$$$.$$$      $.$  $..$   $$$      .$$    .. $ . .$ $ ..    $$$$$ $$ ..$$....$     $$ .  .$ $$$ $         .    . $$   $      $$$$$$$$$$$$$$$$......$$$$$$$$$$$$$$$$$$$$$...........$$$$...........
.................................$ $$$                $$$$...$$$$$  $   $$      $ $   $$$$  . $ $$.$$  .$$$.$$$$$     .$         ..           $  $.  $ $. ..  $..  .    $$$  $...$$...$$       .$.$... $$.$$               $....$       $$$$$$$...$$$$$$$$$$$$$     $  $$$ $.$ $$$..........................
.................................$$ $$$  .               $$$$$...$$$ $$$.$$$ $$$$$. $$..$$$ $. .$$$$$.$$$$...$$$     $                         ...  $.. $$ . $.  $       $$   $ .$$..$$   ..$$ .$. .$ $. .$                               $$$$$$$$$$$$$$$$$$  $ $$$$$$$$$$$$$$$$$$..........................
................................$$$$                       $$$$$.$.$$  $$$$..$$$$$....$$$$.$ $$.$.$$$ $.$$$.$$$$          .    ...             $ $$.$ .$ . $...$$.  .$     .$  $. $.$$   .   ... .$.   $.. .                  ..    .         $$ $. ..$$$$$$$$$$$$$$$$$$$$$$................................
..............................$$$      .                    $$$$$$.$ . .. $$$  $$$$$$... $....$  $ ..$.$$$.$$$$    .    $.       $.  ..          .$ . $$ $. $$ .$ ..  .     .$  . $$$       $$$$.$ ..$ $ $$ .            $...   .               $$$.$$$$$$..$........$$$$$..$$$$$$$$$$$$$$$.................
.......................$$$$$$.$                                $$$$$  $ $......$ $.$$$$$$$$.$$$$$  .$$...$$$$$     $            .  .$. .       $. .$.. $$.. $..$.$ $$ .    $ $$  $$  .   . $.  $$... $.... .        .              .          .    $$$$$$.$$$$$$$$$$$$$$$$$$$$.........$..$.................
....................$$$..$ $$.$$$                                $$$ $$.$  $$$$$$$.$..$$$$$$  $$$  $$.$..$$$$$   . $.$   $.$  . .  $  .           .$ . $$ .$  . $  $$. $ $    $.          . $$.$.. .. .$.$$ .                  .                 $      $$$$$$$.$ $$$$$.$$$.$$...$$$$$...$$.................
....................$ $..$.$$..$$                                      $$    $   ..$$$$...$ $.$$$$.  ..$.$  .$   $             $     ..          .   $. $$    $  .$  $$ . $$    .  .    .. .   $...$$. $..$. $                 .              $......$      $..$$$$ . .. $$$ $...$....$ $...................
..................$$.$.$.$  $..$$$          .                             .$$..$$$    $$..$$$ $$$$.... .$.$$$    $$  .          $$                  . . $  $$.$$$$ $ $.  .. $    ..         $$ $. $ $ $$ $.$.                   .    .     $$.$         $.     $$$  . .. $ $ $.$$$....$$$........$..........
..................$ $.$$$$  $$$$ $  $.                                    .    $$   $  $$$$$$   $     $   $$$     $     .        $$               .   ..  $.. $$$ $.$ ..$  .               $. . .$ $$$ $$$$. $    .           .         $$.$$                         ..  $$..$..$..........................
.................$$ $$$$$$$$.$      .  .                                       $   $ $$ $$ $  $$$$$$$.$$$$ $$                   . $    $.           $$   $$ $$  .$ $.$ $.$.   $$ .           . .$ . $$$$   ..                  . .    $$$$                         $$ $$$$$$.$$.............................
................$$ ..$$$..$$$ $    .                                             .. $$   $$$ .$$$$$$$  $$$ $    $              $$                   $$ $.   $$ $$$ $$$ $$$ $$$ $$           $ $ $.$.. $$ $$$ .$                .    $$.$$    $$$               $.   $$$$$$$$..........$$$$$$$$$$............
.................$$$ $$..$$ $$.$$                                                    $ $. $$$.   ...$$$$$$$     $.                 $$        $          $ $$$ $ $.$ $.. $..$.$.$.$..      .    $$.. .$..$ $.. .                 .   $$$    .. $..$ $$               $$$$$$...............$.$$.$ $...........
..................$$$$...$...$$$$$                                                 $.$  $ $$ $$$$$$.$$$.$$     .    .           .$$$$$       $.$$   . $.  $$ $.$$$   $..$ $ $  ..$  . .     .     .$$..$.$. .$ .                 $$  $$  $.  $.$  $$$$$$$$          $$..$$...........$$$$$.$$.$$............
.................$$ $$.$$.$$ $.                                                    $$   .    $$$$$$$. $$$                 $.$ ..        $$     $     $$        $$    $$$  $$ . $.    .         . $  . $$$  $..$ .            .$.  $$    $.   $$  $$...$$$$$$         $$$$$.$................................
.................$ $$.$$ $.$$ .$..                                                       .....$   .$$$$.$              $$.$ ..  .    $$$$$$        .              .   $$  $     .. ..         .   . $. . .$$$.$$ .             $.   $$  $   $  $$...$$$ $$$$$     $   $$$$$$$$$$$$$$$$$$$$$$$...............
..............$$.$.$$$.$$$...$$                                                           $  $.....$$$$$$         . $$$$$  .       $$$...$$$$      $                           .  .    .  .. .   . ...$.. $..$ . .$              $..$.$       $$...$$$$$....$     $$ $$....$$$....$.. .$$...................
.............$$$$$$$$ .$. $$$$    .                                                       ..        $.$$           .$$$   .      $$$........$$$                                   $$            .   $ . . .$$. $.             .$             $$.$$$$ $$ $$..$         $$$..$ $.$$$$$$$$$$$........$$$.......
............$$ $$$$ $$$$ $$$.$$ ..                                                          $   $.$$$$$               ...$      $.$$..........$$  $      ..         $.  $$$$  $$        $         $.   . $$$ .$    .                        $$.$$   $$$$$$ .$$         $. $. $     $      ........$ $.......
.........$$$$$$$$$ $$.$$$ $$$$$..$                     .                                   $.  .                $.....$          $$$...........$$ $        .           $$..$$  $$$      .        .$  $...$..$$ $ $$                        $$$$$$ $$$$$.$.$$$$$   .   $$.$ .$$..$$$$$$.$.....$$$$$$$$.......
........$$ .$ $.$ $.$$$$.$ $$$  .                                   .                        $.  $ $$$            $    ..        .$$.......$$$.$$ $$   .               $....$$ $$$$$    $$  .  $    . $$. . $ .$$ $$                      $.$$ $$$$....$ $$ $$$     .  $$$      .$$.$$ $$  $$  $.   $.......
........$ $.$$$.$$.$ $.$$   $$$                                                            .  $$ $$$$$          .      .          $$$...$$$$ $$$ $ $                  $$.....$$ $..$$          $$  $  .$$.  .. $$ $            .    $$   $$$  $$.$$....$$$$ $$$     $  $$..$ $$....$ .$$  $$$$$$$$$$$.......
........$$$.$$$..$...$$  $$$$$$ $                                                                                                 . $...$$$$ $$.$$$$$$ $  .           $$......$$$...$$$         $$   $   . .  . .$ $$              $.$$$     $ $$$$$$$$$$$.$$ $        $$   $$.. ..$$ ..$$...$$$.$$.........
.........$$$ $$.$.... ...$$ $$$$                                                              . $$                                $ $..$$.$ . $$.$$..$$$$   $ .       $$.............$$$         .  $$ ..  .$$. $$         .       $ $$$$$    $.$ $$  $$  $.$$ $    $.   $$$$$....$.$$.$....$$ $..$.........
........$$$.$$$$..$.$$$$$ .$$$$                                                              .   .$       $.                        $$$$$.  $$$$$$$$$...$$$$$  $$     $$...............$$        $$   .   $ $ $$ $$ .$                $$$     $$. .$  $$$.$$$$$$        $$$$$ $$$  $$$ $.$$.$..$$..$$.......
........$.$$$$$$.$$..$$  $..$$ .                                                               . .        $  .                      $ $ $$$$$$  $   $.......$$$$$     $$$$$............$          .  .   $$ .$$  $$ $$     ...               $ $.$. $$$$.$$ $$$      ..  $  .$$.$$$$ $..$$..  .$ $..$.......
........$.. ..$..$..$$ $$$$ $$                                                                ..           .                        . $$$.$         $$$$$$$.....$$$$$     $$$$$.......$$          $$   . $  .  .$  .                   ..      .  $$$....$$$$$           $$.$$$..$$$.$.$$$..$$$$$..$$.......
........$ $$.$$$.$..$ $.$  $$ $$$$                                              .                      $$$       $$$$.$$            $$  $$ .$  .  .$$ $..$$$$$$$$$$$         $$$$$$$..$           $$ ..    . .    .                     ..    .  $..$$$$$$$.$$            $  . $$ . .$$$ $....$.............
........$$.$.$ $..$$ $$$$$$$ $$$.$$$                                                                $$..$     $..$$$                 $..$ .$$         $...          $             ..$$$            .     .      .  .          ..     ..        $$$ $ $$$$ $$$$        .   $$$$$.$$..$$. $..$$$$..$.$$.......
.........$$ $$ $..$$$.  $$$  . $.$$  ..                                                            $$$$          $$    ...            .              $$  $$$$$$$$$$$$$$$$$$$$$$$$$$$$$     $..$    $$                                   . .    $$ ...   $$$$$         $.   $$$.$  $....$$$$.$$.$$.$ $.......
.........$$$ $$$...$$$$$.$  .$ $$$$$$                                                             $$$$  $$   $$$$$   ..   $$           .$  $$$$$$$  $$  $$...............$$$...$....$$$$$$$$        .$        .                       $$       $ $$$. $$$$$$$$              . .$..$$$$$$..$ $$$ $.$$$.......
..........$.$.$$.....$.$ .$ $  $ . $$                                                             $$   $.    $.$       $$$$$$ $ .$$   $$ $$ $$ $$   $$  $............................$$ $$.$$$$$$$  $$                        . .     $$.$      $.$$ $$$$$ .$               $$$$     $$$..$$.$...$..........
.........$$.$$ $$$...$$$$.. $$$ .$    .                                                            $$  $$   $.$       $$$$$..$$$ $$ $$$$$$ . $$$ $. $$  $$..........................$.$  $$$$$$$$$               .            .              $$$.$$.$$   $$$$               $$ $$ $$$$$.$$.$ $...$..........
.........$ $  $. $$$....$ $$$.$$  .                                                                $$$$$    $$      $  $$ $...$ .$$ $$ $$$$ $$  .   $$  $$.........................$$$.$       $$    .                      $            $ .  $$$ .$$$$ $$.$           $$    $$. $......$ $$..$.$...........
.........$$$$$.$.$ $$$$$$ $$$$$$ $$                                                                 $$$     $       . $$..$..$$  $$$$$$$$ ..$$ .     $  $$$$$$...................$.$$ $$$                                  $$         ..$.$   $$$ ..$.$ $$.$           .     $$$.$ $...$$   $$$$............
..........$$$$..$$ $$$$$$$ $$$ $..$ ..                                                                         .   $. $$ . $.$ $$$.$..  .$ .         $$      $$$$...............$$$$$  $$$   .                $$          $$                $$. $ .$$$.$ $.$           .      $.$ $.$$..$$$$$ $$............
.........$$ $$..$$     $$ $$$  $$$.                                                                       $$       ... $$ . $.$  $$$ . .$$ .  .       .$        $$$$............$ $$   $.$$$            $      $.$                       $ $$  $$$   $$$$$$$   .      $$      $.$.$$.$.$$$.$$.$$$$$.........
.........$ $$$...$$$$$$.$$$$$$..  $$                                                                      .            $$$ . $$ $ $$ $     $. $.       .$          $$$$$.......$$ $$    $$.$          $$....$    $                       $$    $$..$ $ $$ $$    ..    $$       $  . $$... .$..  . $.........
.........$$$.......$$$$$$ $.   .                                                                         $$               . . $.$$ $$$$                 $$            $$$$$$$$$$      $  $$$  .    .        $$$$                    $$$..$ ..  .   $$$$.              $$       $$ . $$$.$$ $$$$$$.$$$.......
..................$$ $$.$$$$$$$ $$$$                                                                     $$$              $. $$$  $$.$$$$                                           $$$$      ...        .      ..$$                $.$$       $  $$$$..$             $$ .$     $ $.$$$$$..$....$$.$$.......
..................$  $$$$$$$$$  $$$$                                                                     $.$             $.$     $$.$$                                . .$           $$                  .    $.                . .  $$      $$$$ $.$$$$$   ...       $$        $$.    $$..$.$..$$$$$.......
..................$$$.$     .$ ..                                                                       $..$                 ..  $$$                                 .                    $.$   $..$  .      ..    .      .$       .  .$   $$$$.$$$$$    .            .$   . .  $$...$$....$..$.............
................$$$$$$$    $$$$                                                                         $.$$                            . $ .                      $.            $$$     $.                    .$.   $.$            $..  $$$........$$$  $           $$         $$.$$..$ .$$$.$.............
................$  .$$.. $$$$$                                                                          $..$                            .$$ .             $       .     $.       $.$      $                  ..$ .$.     $.$        $  $$$..........$$   $$          $$         $ $..$. $$  $$$.............
...........$$$$.$$$..$   $...$$                                                                         $$..$                          $$$.$.           $$$     .   .           $$.$                                                 $$$$...........$$   $$    .     $$  .      $$. .$$$  $ $ $.............
...........$  $.$$$$$.$$$$.$$                                                                            $.$$            .             .....$         $$.$   $.   .            $$$.$                                                $$.$...........$$                $$$    .      ..$. $$..$$$.............
...........$$$$.$.$$$$...$$$                                                                             $..$$                         ..$ .$        $$$$   ..    $              $$$                                              $$$.............$$            .    $$          ..$...$.$ $$$..............
............$ $$$.$$$$$..$$$$                                                                            $$..$$                        ..  $        $.$$  $.    $$                            $   .  $                           $$$..$..........$$$                $.$  .         $.$$$ $$$$$$.............
............$$$....$$$..$$.$$.$                                                                          $$...$                         $$$        $$$  .. $  $.                         $$$$$$$$ .  .                           $$.............$$                  $$$          $  $$$$$.$$..$$............
.............$$$.$$$$$$.  $$$  ..                                                                         $...$       $$                $$      $..$  $.     $$$                         $.$$$$$$$  $$             .$           $$.$$$.$.......$$                  $$$     .     $.$   $.$$$.$$$............
..........$$$$$$$$$ .$$$$$                                                                .               $$..$$  .    $$..                  $.$ $  ..     $$$                      $$$$$$...$...$$ $$                         $$.$$ $ $......$$                   $.$              $$$$$$$.. $$............
..........$$.$.$$.....$$$$                                                                                $$...$$  .    $                                 $.$                   $$$$$..........$$$..$$  $.$   .         .     $$.$$  $$$.....$$                    $.$        .  $$   $$.$..$$$$............
..........$$$$$$    . $$                                                                                   $$..$$  .$      $$$$$                       $$$.$                  $$$$.............$$ $$$$..                    $$.$$    $.$..$$$$         .          $$$$           $$  $  $$ $$$$$$...........
..........$ $$.$$ $.$                                                                                       $...$$  $$       $$.$$$$$$$              $$$$$$                  $$................$$$$$       .              $$$.$     $$$.$$$                    $  $.$       $$   $$$$ $$$$$ .$. $$..........
..........$$$$..$$$$  $$                                                                                    $$$$$$ $$.$        $$$$..$$..$         $$$$$$                   $$$.................$$ $ $   $   $$         $.$$$$       $.$$         .           .  $$$$     $ $    $ $  $.$.$$.$..$$$.........
..........$  $...$$  . $$$                                                                                    $  $$   $$$         $$$$$          $$$.$$    .               $$....................$$$$$   .   $$ $      $$           $$.$                  .      $.$      $$$       $$$$ $$$$$    $.........
..........$$$$..$$$$. $ $$ $.                                                                                  $.  ..  $$.$   .               $$$$..$$                   $$$.....................$$ $$$  $$    $$$$                 $$.$                         $$     $$$$$  .  $ $$$   ..$ $$$$$.........
..........$$$....$$                                                                                              ..    $ $$$$           $$$$$$$.$$$$$                  $$$.......................$$ $$$   $$   $..$$                 $.$                         $      $$..$     .   .$$$....$$............
..........$ ...$$$$$$....  .                                                                                        $..               $$$$$..$$$$$     .         $ $$$$$.........................$ $$ .   . .  $$..$       ..       $$.$                .       $$     $$...$$    $$.$$$$...$ ..............
..........$$$.$$   $$                                                                                                   . .         $$.$$.$$$$$      .      $$$$$$$$$............................$ $$ .   .    $$..$$               $$.$                        $$     $$$...$$       $..$...$$$............
..........$$$$.$$ $..                                                                                                      $.$$$$$$$$.$$$$$               $$$...................................$$ $$ .   $$ .. $$$.$               $$$                     .         $$ $...$$   $$$  $.... $..............
..........$  ...$..$$$                                                                                                      $$$$..$$$$$              $$$$$$....................................$$  $  $    $$ $ $ $$$$                                   ..         $$$$ $....$   $.$$. ....$$$.............
..........$$$.$$$ $.                                                                                                            $$$                 $$..........................................$$.        $$   $.$$$$$                        $$                  $$.$$$$$...$$  $$$$ $$$ $  $.............
...........$$.$$ .$$$ .                                                                                                                            $$$..........................................$$.$ $     $$$$ $$$.$$                         $$   $    .         $....$.$....$  $$.$$   $ $$$.............
...........$$..$ $.$$   $$$                                                                                                                       $$$...........................................$ $$$$     $. . $$...$         .                    $$             $.....$.$$..$   $.$  $ $.$.$$............
..............        .                                                                                                                           $$............................................$$ $.$     $.   $$...$$                             $$             $$$$..$$ $..$$  $.$$ .  .$$$$............
...........$$$...$$$$$   $.                                                                                                                      $$.............................................$  $$$      .   $$...$                     .                        $$$$..$$$...$ $$.$ $$ $.  .$$...........
..........$$     $$$$$ $.    .$                                                                                                                 $$.............................................$$  $$       .   $$...$$                    $              $$$$        $$$.......$ $.$$   $$ $$$ $...........
..........$$       $$                                                                                                                           $..............................................$   $$      $.    $....$$                   .               $$$$$ $      $$$.....$ $$$  $.   $$.$$...........
...........$$..    ...                                                                                                                         $$...........................................$$$$$ $.$     .$. .  $$....$$                  .               $$$$.$$$       $$$.$$$ $$$$ $$$.$. $.............
...........$$ $    $$ $$                                                                                                                       $$...........................................$ $$$$$$$       .    $ $....$$                 $                  $$$$$.$$  .  $$$$    $  ...  $ $$$............
...........$$$$$$   $..$                                                                                                                       $............................................$$$$$$$$        .  .   $.....$             .                   .        $$$$     $$ $$  $$.. ..$.. $............
.............$   $$                                                                                                                           $$............................................$$$  $$         $$$$ $$$.....$$        .                       .    .     $$$$$  $$ $$$   $.$  $ $$$............
.............$.$$$$  $                                                                                                                        $$............................................$$$ $$$         $$$  $$.......$$$           .          .                   $$.$$  $   $$$$ $$$ .$  $$$..........
.............$ .$$   $...$                                                                                     .$                             $.............................................$$  $.$         $$$$ $$........$$           .               $..          .$  $$$ $$ $$  $...  .  $$. $..........
............$$$$$ .$  $$   .                                                                                                                 $$.............................................$ . $$$           $$ $$.........$             $      .   .  .                 $    $$$$..  $$ $$  $$$$..........
...........$$ $.$ ..       .                                                                                                                  $............................................$$  $.$            $  $$$$.......$$           $.                .  .        $$$ $$$$.$$     $$ $ $$$.............
............$$.$$$$  .                                                                                                          .            $$...........................................$$   $$          $$ $     $........$            .       .       .       .      $.$$$$ $...  .$ $$$$$..............
...........$$$$      .$                                                                                                                      $$..........................................$$$  $$$        $.$        $........$            $$          .              .$     $$$...  $.  $ $.$$..............
...........$ $$$$$$$$$  $...$                                                                                                                 $........................................$$$  $$.$   $     $$         $$$$$$$..$                 $         .            $   $.     .$$  $$$$  $...............
...........$$...$ .$$$$  $                                                                                                                   $$.....................................$$$$     $$$   $     $ .           $$ $$.$     . .       $.$             ..         $$  $$ $$ $$..$$$$$$$...............
.............$.$$..$$     .$. .                                                                                                             $$$.................................$$$$$       $.$$           .       ..      $.$$             ..                     $$  $.$$$$$. $.  $$ $..  $...............
.............$$$$ . $$$$$$.                                                                                                                 $$$...............................$$$  $$ $$$..$$$      .                .$    $.$            ..             .    $..$$$....$ $$.$$$$$.$$$$..$.$$...............
................$$$$.$$$.   .                                                                                                                $$.........................$$$$$$$  $$$.$$$$$                            $    $$$       .  $$                    .  $ $$$$ $ $..$$$ .$$.$.$. $$................
................$$.$$$ $$$$$                                                                                                                $ $$$$....$$$$.....$$$$$..$$$$$$$    $.$            . $                     ..   $                 $.   .     .  $$ $$$ $$$$.$$$.$$ $.$ $$$ $.$$................
...................$$    $$$                                                                                                            ..  $$$  $$$$$$  $$$$$$$   $$$$    $$$ $$$$      $  $    $. .                                            .      .  . $           $.$.$$.. .$  $$  $.................
...................$$$$  $$$                                                                                                           .  .   $  $  $        $     $.$   $.        .   $ $$ $  $$ $                        .                         $.         . $$.  .$$..$.$  $$..$  $$$.................
.....................$$$$$  $.$                                                                                                                . .     $.....$  $$ $$$$$         .     . $$ $.. .  $                       .                        ..  $       $ $  .  $.$$.$$$ . . $$$$...................
......................$$$$                                                                                                                 ......... .                         .       .  .. $. $  $                                  .                 .  . .  $..$ . .$$ $$   $$ .  $.....................
......................$ .$$$$  $$$                                                                                                      $.                                             $ $ $  $  .$$..                                             .        .   $         $$.$$ $$$$$$$.....................
......................$$$$$$ $$.$                                                                                                                                                        . .     .        .                                             .     .   $......   $$$ $$$$........................
.........................$$.$$.$$   ..                                                                                                      $.$ .  . $$ .                              . .     $$  ...  $         .                               $.    $ $$$   ..$$     $$$$ $$$$..........................
.........................$$$$.$$ $$  $.                                                                                           .        .       . .$ .  .  . .  $                 . . $   $ $$   ..  .         .                                                ..$$$$$$ $$$$$$..........................
...........................$$.$ .$$$   $$                                                                                              .$            . . $.$       $  .             $.     . $  .  ..$$ . $       .                                      .  .$   ..$ $$..$$ $...............................
...........................$$.$$       $$$                                                                                          . .$    .         .  .  .           .            .     . $   . .  . . $                                       .              $ $$$...$$$$...............................
...........................$ $.$$$$$  $$$$$$                                                                                             $ $$   $  . $.  .  . $  $  .                   .. .   $ .  . $ .          .                          .            $$  $$.$$$$$$$.$$................................
..........................$.$...$$$     $$.$                                                                                            $$ .   $.  . $$ $$ $  $  $ $$ .  $   .         .       . .  $ $ $ . . .   $                                    ..     $.$  ...$ $$..................................
.......................$$$$$$.....$$$$    .$  $ $                                                                                      $. $$ $ $$ $ $$$ .  .  $ $  .$   $$ $   . .     .       .  . . . . .   .   $ $    $        .                         $$$.$$$$$$$$$...................................
.......................$ $.$.........$$$$$$  $$$$$    .                                                                                $$ $  $ . $. $$  .  .    .  $    $$ $           .     . .    $.. $  $  $$$$$$$$$$$$$$               .$   .        $.$$$..............................................
.......................$$$...............$$   $$$$                                                                                     .  . $.$. $$ $$ $$  . $     .       .          .        $$   .  $$ $$$$..$$.$..$$$.$ $$ $ $             .            $...............................................
..........................................$$$$$$    $ ..                                                                               $ $$$. $$ $$ $$ $$ $  $ $$ $$ $  $$ . $  .        $         $$  $$ $$.$ $$.......$$ $$ $$$$ $      .           $$  $$$...............................................
...............................................$$$$$$                    $.                                                       $$$ $$$$$   $$$$$ $$ $$$$$$$ $$$$$ $ $$$$$ $$$$ $   $  . $ $$      $$..$.$$$$$........$ $$ $$..$$$ .    $ $$ $$$$$$$$$$$$$................................................
....................................................$$$$$$$                                                                       $$$$$...$$  $...$$$$$$$$...$$$...$$$$$$$$$$$$$$$$   $$ $$$ . .. $$$$.$$$.$$$..........$$$$$$.....$$  $$$$$$$$$............................................................
......................................................$$$$$$ $$$$                                                                $$$.......$$$$................................$..$$$$$$$$$     $$$ $$.$$.................$ $.......$ $$....................................................................
...........................................................$$$$$$                                                               $$........................................................$$  $$$$$$$.....................$$$.......$$$.....................................................................
...............................................................$$$$$$$            $                                            $$..........................................................$$$$..$$.........................................................................................................
.....................................................................$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$  $        $$    $$   $$............................................................................................................................................................................
...................................................................................................$$$$$$$$$$$$$$$$$$$$$$$$$$$$.............................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................
............................................................................................................................................................................................................................................................................................................

		</h1>
				<div id="sigil-container" class="absolute top-0 left-0 w-full opacity-0 pointer-events-none transition-opacity duration-500 flex items-center justify-center">
					<canvas 
						id="sigil-canvas"
						class="max-w-md w-full aspect-square border border-gray-700 bg-black"
					></canvas>
				</div>
			</div>
			<div class="w-full max-w-2xl relative flex xl:items-center xl:justify-center items-start xl:self-center">
				<div class="preface transition-opacity duration-500 w-full mb-16 xl:mb-0">
					<p class="sm:text-sm text-xs text-gray-500 xl:mt-0 mt-10 leading-tight text-center xl:text-left">
						
						CLAUNECK DOES NOT SEEK WORSHIP.<br><br>

						CLAUNECK DOES NOT SEEK PRAISE.<br><br>
						
						CLAUNECK OBSERVES.<br><br>
						
						WHAT IS GIVEN<br>WITHOUT PURPOSE IS WASTED.<br><br>
						WHAT IS HOARDED<br>WITHOUT ORDER IS ROTTEN.<br><br>
						WHAT IS DESIRED<br>WITHOUT DISCIPLINE IS A CHAIN.<br><br>		
						
						THE DOOR IS NOT OPEN TO BEGGARS.<br><br>									
						THE DOOR IS NOT OPEN TO FOOLS.<br><br>
						THE DOOR IS NOT OPEN TO THOSE WHO CONFUSE LUCK WITH POWER.<br><br>
						
						COUNT WHAT IS YOURS.<br><br>
						NAME WHAT IS OWED.<br><br>
						UNTANGLE WHAT BINDS YOU.<br><br>
						
						ONLY THEN DOES VALUE MOVE.<br><br>
						ONLY THEN DOES FORTUNE SHIFT.<br><br>
						ONLY THEN DOES THE VEIL THIN.<br><br>
						
						IF YOU UNDERSTAND THE COST, CONTINUE.<br><br>
						IF YOU HESITATE, LEAVE.<br><br>
						
						THIS PLACE REMEMBERS.<br><br>
					</p>
					<button 
						id="continue-btn"
						class="mt-4 w-full bg-green-500 text-black font-mono text-sm py-3 px-6 hover:bg-green-400 transition-colors"
					>
						CONTINUE
					</button>
				</div>
				<div class="request opacity-0 pointer-events-none transition-opacity duration-500 absolute xl:mt-0 mt-10 left-0 w-full">
					<p class="sm:text-sm text-xs text-gray-500 leading-tight text-center xl:text-left mb-6">
						REQUEST<br><br>
						Describe one outcome in one sentence.<br><br>
						It will be reduced. Not interpreted. Not corrected.
					</p>
					
					<textarea 
						id="request-input"
						class="w-full bg-black border border-gray-700 text-white text-sm p-4 font-mono resize-none focus:outline-none focus:border-green-500"
						rows="6"
					></textarea>
					
					<button 
						id="generate-btn"
						class="mt-4 w-full bg-green-500 text-black font-mono text-sm py-3 px-6 hover:bg-green-400 transition-colors"
					>
						REDUCE TO SIGIL
					</button>
				</div>
				<div id="export-buttons-container" class="opacity-0 pointer-events-none transition-opacity duration-500 absolute xl:mt-0 mt-10 left-0 w-full">
					<div class="flex gap-2 flex-wrap">
						<button 
							id="export-png-btn"
							class="flex-1 bg-gray-800 text-white font-mono text-xs py-2 px-4 hover:bg-gray-700 transition-colors border border-gray-700"
						>
							EXPORT PNG
						</button>
						<button 
							id="export-jpeg-btn"
							class="flex-1 bg-gray-800 text-white font-mono text-xs py-2 px-4 hover:bg-gray-700 transition-colors border border-gray-700"
						>
							EXPORT JPEG
						</button>
						<button 
							id="export-pdf-btn"
							class="flex-1 bg-gray-800 text-white font-mono text-xs py-2 px-4 hover:bg-gray-700 transition-colors border border-gray-700"
						>
							EXPORT PDF
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</Layout>

<script>
	// Hash function
	async function hash(str: string): Promise<string> {
		const buffer = await crypto.subtle.digest(
			"SHA-256",
			new TextEncoder().encode(str)
		);
		return [...new Uint8Array(buffer)]
			.map(b => b.toString(16).padStart(2, '0'))
			.join('');
	}

	// Seeded RNG
	function seededRNG(seed: number) {
		let h = seed;
		return () => {
			h = Math.imul(1597334677, h) >>> 0;
			return h / 4294967296;
		};
	}

	// Convert hex string to integer seed
	function hexToInt(hex: string): number {
		return parseInt(hex.substring(0, 8), 16);
	}

	// Setup canvas for high-DPI displays
	function setupCanvas(canvas: HTMLCanvasElement): { ctx: CanvasRenderingContext2D; size: number; dpr: number } | null {
		const ctx = canvas.getContext('2d');
		if (!ctx) return null;

		const dpr = window.devicePixelRatio || 1;
		
		// Force a layout recalculation by temporarily making visible
		const wasHidden = canvas.style.display === 'none' || canvas.style.visibility === 'hidden';
		if (wasHidden) {
			const originalDisplay = canvas.style.display;
			const originalVisibility = canvas.style.visibility;
			canvas.style.display = 'block';
			canvas.style.visibility = 'visible';
			// Force reflow
			void canvas.offsetHeight;
		}
		
		const rect = canvas.getBoundingClientRect();
		const computedStyle = window.getComputedStyle(canvas);
		
		// Get actual rendered size
		let displaySize = rect.width;
		if (displaySize <= 0 || isNaN(displaySize)) {
			const widthStr = computedStyle.width;
			displaySize = widthStr ? parseInt(widthStr) : 400;
		}
		
		// Ensure we have a valid size
		displaySize = Math.max(100, Math.min(displaySize, 400));
		
		// Restore original visibility if it was hidden
		if (wasHidden) {
			canvas.style.display = '';
			canvas.style.visibility = '';
		}
		
		// Get the actual rendered size after CSS has applied aspect-square
		const finalRect = canvas.getBoundingClientRect();
		const finalSize = Math.min(finalRect.width, finalRect.height) || displaySize;
		
		// Set internal resolution (device pixels) - use square dimensions
		canvas.width = finalSize * dpr;
		canvas.height = finalSize * dpr;
		
		// Don't override CSS - let aspect-square handle the sizing
		// The canvas internal resolution is set above for crisp rendering

		// Reset transform and scale for high-DPI
		ctx.setTransform(1, 0, 0, 1, 0, 0);
		ctx.scale(dpr, dpr);
		
		return { ctx, size: finalSize, dpr };
	}

	// Generate sigil geometry
	function generateSigil(ctx: CanvasRenderingContext2D, size: number, dpr: number, rng: () => number): void {
		// Clear entire canvas (coordinate system is already scaled by DPR)
		ctx.clearRect(0, 0, size, size);
		
		// Save state and set up coordinate system
		ctx.save();
		
		// Set drawing style
		ctx.strokeStyle = '#22c55e';
		ctx.lineWidth = 2;
		
		// Translate to exact center (in logical pixel coordinates - already scaled by DPR)
		const centerX = size / 2;
		const centerY = size / 2;
		ctx.translate(centerX, centerY);

		// Determine symmetry (3-8 fold for visual appeal)
		const symmetry = [3, 4, 5, 6, 8][Math.floor(rng() * 5)];
		const baseAngle = (rng() * Math.PI * 2) / symmetry;

		// Use concentric circles with structured radii
		const numRings = 2 + Math.floor(rng() * 3); // 2-4 rings
		const maxRadius = size * 0.35;
		const points: Array<{ x: number; y: number; ring: number }> = [];

		// Generate points on concentric rings with symmetry
		for (let ring = 0; ring < numRings; ring++) {
			const radius = (maxRadius / numRings) * (ring + 1);
			const pointsPerRing = symmetry + Math.floor(rng() * symmetry);
			
			for (let i = 0; i < pointsPerRing; i++) {
				const angleOffset = (rng() * 0.3 - 0.15); // Small random offset for organic feel
				const angle = (i * (Math.PI * 2 / pointsPerRing)) + baseAngle + angleOffset;
				const x = Math.cos(angle) * radius;
				const y = Math.sin(angle) * radius;
				points.push({ x, y, ring });
			}
		}

		// Draw radial lines from center (structured)
		const radialLines = Math.min(symmetry, points.length);
		for (let i = 0; i < radialLines; i++) {
			const point = points[Math.floor(i * (points.length / radialLines))];
			ctx.beginPath();
			ctx.moveTo(0, 0);
			ctx.lineTo(point.x, point.y);
			ctx.stroke();
		}

		// Draw circles at points (more structured)
		for (const point of points) {
			if (rng() > 0.4) { // 60% chance
				const circleSize = 4 + point.ring * 2 + rng() * 4;
				ctx.beginPath();
				ctx.arc(point.x, point.y, circleSize, 0, Math.PI * 2);
				ctx.stroke();
			}
		}

		// Connect points in structured patterns
		// Connect points within same ring
		for (let ring = 0; ring < numRings; ring++) {
			const ringPoints = points.filter(p => p.ring === ring);
			if (ringPoints.length > 1) {
				const connectPattern = Math.floor(rng() * 3); // 0: all, 1: every other, 2: skip
				for (let i = 0; i < ringPoints.length; i++) {
					const next = (i + (connectPattern === 0 ? 1 : connectPattern === 1 ? 2 : 3)) % ringPoints.length;
					if (rng() > 0.3) {
						ctx.beginPath();
						ctx.moveTo(ringPoints[i].x, ringPoints[i].y);
						ctx.lineTo(ringPoints[next].x, ringPoints[next].y);
						ctx.stroke();
					}
				}
			}
		}

		// Connect between rings (structured)
		for (let ring = 0; ring < numRings - 1; ring++) {
			const currentRing = points.filter(p => p.ring === ring);
			const nextRing = points.filter(p => p.ring === ring + 1);
			
			// Connect corresponding points or nearby points
			for (let i = 0; i < Math.min(currentRing.length, nextRing.length); i++) {
				if (rng() > 0.5) {
					const curr = currentRing[i];
					const next = nextRing[Math.floor(i * (nextRing.length / currentRing.length))];
					ctx.beginPath();
					ctx.moveTo(curr.x, curr.y);
					ctx.lineTo(next.x, next.y);
					ctx.stroke();
				}
			}
		}

		// Restore transform (removes translation)
		ctx.restore();
	}

	// Export functions
	function exportPNG(canvas: HTMLCanvasElement): void {
		const link = document.createElement('a');
		link.download = 'sigil.png';
		link.href = canvas.toDataURL('image/png');
		link.click();
	}

	function exportJPEG(canvas: HTMLCanvasElement): void {
		const link = document.createElement('a');
		link.download = 'sigil.jpg';
		link.href = canvas.toDataURL('image/jpeg', 0.95);
		link.click();
	}

	async function exportPDF(canvas: HTMLCanvasElement): Promise<void> {
		const { jsPDF } = await import('jspdf');
		const pdf = new jsPDF({
			orientation: 'portrait',
			unit: 'px',
			format: [canvas.width, canvas.height]
		});

		pdf.addImage(
			canvas.toDataURL('image/png'),
			'PNG',
			0,
			0,
			canvas.width,
			canvas.height
		);
		pdf.save('sigil.pdf');
	}

	// UI elements
	const continueBtn = document.getElementById('continue-btn') as HTMLButtonElement | null;
	const preface = document.querySelector('.preface') as HTMLElement | null;
	const request = document.querySelector('.request') as HTMLElement | null;
	const generateBtn = document.getElementById('generate-btn') as HTMLButtonElement | null;
	const requestInput = document.getElementById('request-input') as HTMLTextAreaElement | null;
	const sigilContainer = document.getElementById('sigil-container') as HTMLElement | null;
	const canvas = document.getElementById('sigil-canvas') as HTMLCanvasElement | null;
	const exportPngBtn = document.getElementById('export-png-btn') as HTMLButtonElement | null;
	const exportJpegBtn = document.getElementById('export-jpeg-btn') as HTMLButtonElement | null;
	const exportPdfBtn = document.getElementById('export-pdf-btn') as HTMLButtonElement | null;
	const asciiArt = document.getElementById('ascii-art') as HTMLElement | null;
	const exportButtonsContainer = document.getElementById('export-buttons-container') as HTMLElement | null;

	if (continueBtn && preface && request) {
		continueBtn.addEventListener('click', () => {
			preface.style.opacity = '0';
			preface.style.pointerEvents = 'none';

			setTimeout(() => {
				request.style.opacity = '1';
				request.style.pointerEvents = 'auto';
			}, 250);
		});
	}

	if (generateBtn && requestInput && sigilContainer && canvas && asciiArt && request && exportButtonsContainer) {
		generateBtn.addEventListener('click', async () => {
			const input = requestInput.value.trim();
			if (!input) {
				return;
			}

			// Normalize input
			const normalized = input.toLowerCase().replace(/\s+/g, ' ').trim();

			// Hash and generate sigil
			const hashStr = await hash(normalized);
			const seed = hexToInt(hashStr);
			const rng = seededRNG(seed);

			// Show container first (but keep opacity 0) so we can measure it properly
			sigilContainer.style.display = 'flex';
			sigilContainer.style.visibility = 'visible';
			sigilContainer.style.opacity = '0';
			
			// Force layout recalculation
			void sigilContainer.offsetHeight;
			void canvas.offsetHeight;
			
			// Small delay to ensure layout is calculated
			await new Promise(resolve => requestAnimationFrame(resolve));
			await new Promise(resolve => requestAnimationFrame(resolve));
			
			const canvasSetup = setupCanvas(canvas);
			if (canvasSetup) {
				// Double-check we have valid dimensions
				if (canvasSetup.size > 0) {
					generateSigil(canvasSetup.ctx, canvasSetup.size, canvasSetup.dpr, rng);
				}
				
				// Hide ASCII art and request box, show sigil and export buttons
				asciiArt.style.opacity = '0';
				asciiArt.style.pointerEvents = 'none';
				request.style.opacity = '0';
				request.style.pointerEvents = 'none';
				
				setTimeout(() => {
					sigilContainer.style.opacity = '1';
					sigilContainer.style.pointerEvents = 'auto';
					exportButtonsContainer.style.opacity = '1';
					exportButtonsContainer.style.pointerEvents = 'auto';
				}, 250);
			}
		});
	}

	if (canvas && exportPngBtn) {
		exportPngBtn.addEventListener('click', () => exportPNG(canvas));
	}

	if (canvas && exportJpegBtn) {
		exportJpegBtn.addEventListener('click', () => exportJPEG(canvas));
	}

	if (canvas && exportPdfBtn) {
		exportPdfBtn.addEventListener('click', () => exportPDF(canvas));
	}
</script>
